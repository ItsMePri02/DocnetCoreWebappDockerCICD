# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool: DemoAg
  

variables:
  imageName: 'lalitkr2506/azureimage:$(build.buildNumber)'

steps:
- task: Docker@2
  inputs:
    containerRegistry: 'dockerHub'
    command: 'login'
- task: Docker@2
  inputs:
    containerRegistry: 'dockerHub'
    command: 'build'
    Dockerfile: '**/Dockerfile'
    imageName: $(imageName)
    restartPolicy: always
- task: Docker@2
  inputs:
    containerRegistry: 'dockerHub'
    command: 'push'
